# ============================================
# Trading Bot Environment Variables Template
# ============================================
#
# This file documents all required environment variables.
# DO NOT commit actual credentials to version control!
#
# For deployment, set these as GitHub Secrets:
# Repository → Settings → Secrets and Variables → Actions
#

# ============================================
# VPS Access (for GitHub Actions deployment)
# ============================================

VPS_HOST=your-vps-ip-or-hostname
VPS_SSH_USER=ubuntu
# VPS_SSH_PRIVATE_KEY=<ssh-private-key>  # Set in GitHub Secrets only

# ============================================
# Interactive Brokers Credentials
# ============================================

IB_USERNAME=your-ib-username
IB_PASSWORD=your-ib-password
IB_TWOFA_SECRET=your-totp-secret-base32  # Required for live trading
VNC_SERVER_PASSWORD=your-vnc-password

# Trading Mode: paper or live
TRADING_MODE=paper

# ============================================
# IB Connection Settings
# ============================================

# Automatically set based on trading mode:
# - paper: 4002
# - live: 4001
IB_PORT=4002

# Client IDs (must be unique if multiple connections)
IB_CLIENT_ID=42
IB_STREAMING_CLIENT_ID=100  # Used by streaming service
IB_TRADING_CLIENT_ID=101    # Used by trading bot

# Connection parameters
IB_RTH_DEFAULT=true
IB_CONNECT_TIMEOUT=6
IB_RECONNECT_BACKOFF_SECONDS=3
IB_MARKETDATA_DELAY=1.5

# Gateway release channel: stable, latest, or nightly
IB_GATEWAY_RELEASE_CHANNEL=stable

# ============================================
# Database Configuration (PostgreSQL)
# ============================================

POSTGRES_USER=tradingapp_user
POSTGRES_PASSWORD=your-strong-postgres-password
POSTGRES_DB=tradingapp_db
POSTGRES_HOST=postgres  # Docker service name
POSTGRES_PORT=5432      # Internal Docker port

# External port mapping (for host access)
# POSTGRES_EXTERNAL_PORT=5433

# ============================================
# Redis Configuration
# ============================================

REDIS_HOST=redis  # Docker service name
REDIS_PORT=6379

# ============================================
# Application Security
# ============================================

# JWT Secret Key - CRITICAL!
# Generate with: openssl rand -hex 64
JWT_SECRET_KEY=your-64-character-random-hex-string

# ============================================
# Logging Configuration
# ============================================

LOG_LEVEL=INFO
SQL_LOG_LEVEL=WARNING
LOG_FORMAT=text  # Options: text, json

# ============================================
# Frontend Configuration (Optional)
# ============================================

VITE_API_URL=http://localhost:8000

# ============================================
# GENERATE SECURE CREDENTIALS
# ============================================
#
# To generate secure credentials, use these commands:
#
# JWT Secret (64-char hex):
#   openssl rand -hex 64
#
# PostgreSQL Password:
#   openssl rand -base64 32
#
# VNC Password:
#   openssl rand -base64 16
#
# SSH Key Pair:
#   ssh-keygen -t ed25519 -C "github-actions-deploy" -f github_deploy_key
#
# ============================================
# GITHUB SECRETS SETUP
# ============================================
#
# 1. Navigate to your GitHub repository
# 2. Go to Settings → Secrets and Variables → Actions
# 3. Click "New repository secret"
# 4. Add each of the following secrets:
#
# Required Secrets (11):
#   - VPS_HOST
#   - VPS_SSH_PRIVATE_KEY
#   - VPS_SSH_USER
#   - IB_USERNAME
#   - IB_PASSWORD
#   - IB_TWOFA_SECRET (for live trading)
#   - VNC_SERVER_PASSWORD
#   - POSTGRES_USER
#   - POSTGRES_PASSWORD
#   - POSTGRES_DB
#   - JWT_SECRET_KEY
#
# Optional Secrets (defaults will be used if not set):
#   - IB_CLIENT_ID (default: 42)
#   - IB_RTH_DEFAULT (default: true)
#   - IB_CONNECT_TIMEOUT (default: 6)
#   - IB_RECONNECT_BACKOFF_SECONDS (default: 3)
#   - IB_MARKETDATA_DELAY (default: 1.5)
#   - IB_GATEWAY_RELEASE_CHANNEL (default: stable)
#   - LOG_LEVEL (default: INFO)
#   - SQL_LOG_LEVEL (default: WARNING)
#   - LOG_FORMAT (default: text)
#
# ============================================
# TRADING MODE CONFIGURATION
# ============================================
#
# Paper Trading:
#   - TRADING_MODE=paper
#   - IB_PORT=4002
#   - No 2FA required (typically)
#   - Uses IBKR paper trading account
#
# Live Trading:
#   - TRADING_MODE=live
#   - IB_PORT=4001
#   - IB_TWOFA_SECRET required
#   - Uses real IBKR brokerage account
#
# The GitHub Actions workflow allows you to select
# the trading mode when manually triggering deployment.
#
# ============================================
